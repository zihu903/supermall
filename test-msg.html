<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>原生测试</title>
</head>
<body>
    <h2>原生 Web-View 测试</h2>
    <p>尝试用原生方式发送...</p>

    <script>
        // 页面加载完成后
        document.addEventListener('DOMContentLoaded', function() {
            // 重点：使用微信原生接口，不使用 UniApp 的
            if (typeof wx !== 'undefined' && wx.miniProgram) {
                console.log('检测到微信环境，尝试发送...');
                
                // 原生发送
                wx.miniProgram.postMessage({
                    data: { 
                        action: 'native_test', 
                        msg: '我是原生发的消息' 
                    }
                });
                
                document.body.innerHTML += '<p>已触发原生 postMessage</p>';
            } else {
                document.body.innerHTML += '<p>未检测到微信环境</p>';
            }
        });
    </script>
</body>
</html>
